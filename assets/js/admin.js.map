{"version":3,"sources":["admin.js","media-uploader.js"],"names":["$","window","media_frame","$current_uploader","wp","media","frames","meta_image_frame","title","on","media_attachment","state","get","first","toJSON","find","val","id","hide","show","data","attr","url","html","document","e","preventDefault","this","closest","open","siblings","$image_preview","$media_url","mcg_instantiate_media_uploaders","jQuery"],"mappings":"AAAA,cCKA,SAAYA,GAGXC,OAAA,gCAA4C,WAE3C,GAAIC,GAAaC,CAEVC,IAAGC,QAIVH,EAAcE,GAAGC,MAAMC,OAAOC,iBAAmBH,GAAGC,OACnDG,MAAO,iBAGRN,EAAYO,GAAI,SAAU,WAEzB,GAAIC,GAAmBR,EAAYS,QAAQC,IAAK,aAAcC,QAAQC,QAQtE,QANAX,EAAkBY,KAAM,aAAcC,IAAIN,EAAiBO,IAE3Dd,EAAkBY,KAAM,iBAAkBG,OAC1Cf,EAAkBY,KAAM,iBAAkBI,OAGjChB,EAAkBiB,KAAM,SAChC,IAAK,QACJjB,EAAkBY,KAAM,kBAAmBM,KAAM,MAAOX,EAAiBY,IACzE,MAED,SACCnB,EAAkBY,KAAM,cAAeQ,KAAMb,EAAiBY,QAMjEtB,EAAGwB,UAAWf,GAAI,QAAS,oCAAqC,SAAUgB,GAEzEA,EAAEC,iBAEFvB,EAAoBH,EAAG2B,MAAOC,QAAS,sBAE5BzB,GAAkBiB,KAAM,OAEnClB,GAAY2B,SAWb7B,EAAGwB,UAAWf,GAAI,QAAS,oCAAqC,SAAUgB,GASzE,OAPAzB,EAAG2B,MAAOG,SAAU,iBAAkBX,OACtCnB,EAAG2B,MAAOT,OACVlB,EAAG2B,MAAOG,SAAU,aAAcd,IAAK,IAEvCb,EAAoBH,EAAG2B,MAAOC,QAAS,uBAG9BzB,EAAkBiB,KAAM,SAChC,IAAK,QAEJ,GAAIW,GAAiB/B,EAAG2B,MAAOG,SAAU,iBACzCC,GAAeV,KAAM,MAAOU,EAAeX,KAAM,gBAAmB,GAEpE,MAED,SAEC,GAAIY,GAAahC,EAAG2B,MAAOG,SAAU,aACrCE,GAAWT,KAAKS,EAAWZ,KAAM,gBAAmB,UAKtDjB,GAAoB,MAetBH,EAAGiC,kCAECC","file":"admin.js","sourcesContent":["'use strict';\n\n/**\n Allows media uploader to be used in the backend.\n\n @since 1.0.0\n */\n(function ($) {\n\t'use strict';\n\n\twindow['mcg_instantiate_media_uploaders'] = function () {\n\n\t\tvar media_frame, $current_uploader;\n\n\t\tif (!wp.media) {\n\t\t\treturn;\n\t\t}\n\n\t\tmedia_frame = wp.media.frames.meta_image_frame = wp.media({\n\t\t\ttitle: 'Choose Media'\n\t\t});\n\n\t\tmedia_frame.on('select', function () {\n\n\t\t\tvar media_attachment = media_frame.state().get('selection').first().toJSON();\n\n\t\t\t$current_uploader.find('.media-id').val(media_attachment.id);\n\n\t\t\t$current_uploader.find('.upload-media').hide();\n\t\t\t$current_uploader.find('.remove-media').show();\n\n\t\t\t// Preview\n\t\t\tswitch ($current_uploader.data('type')) {\n\t\t\t\tcase 'image':\n\t\t\t\t\t$current_uploader.find('.image-preview').attr('src', media_attachment.url);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t$current_uploader.find('.media-url').html(media_attachment.url);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('click', '.mcg-media-uploader .upload-media', function (e) {\n\n\t\t\te.preventDefault();\n\n\t\t\t$current_uploader = $(this).closest('.mcg-media-uploader');\n\n\t\t\tvar type = $current_uploader.data('type');\n\n\t\t\tmedia_frame.open();\n\n\t\t\t// TODO Not currently working\n\t\t\t//media_frame.title = $current_uploader.data( 'title' );\n\t\t\t//media_frame.button = {text: $current_uploader.data( 'button-text' )};\n\t\t\t//\n\t\t\t//if (type && type !== 'any' ) {\n\t\t\t//    media_frame.library = {type: type};\n\t\t\t//}\n\t\t});\n\n\t\t$(document).on('click', '.mcg-media-uploader .remove-media', function (e) {\n\n\t\t\t$(this).siblings('.upload-media').show();\n\t\t\t$(this).hide();\n\t\t\t$(this).siblings('.media-id').val('');\n\n\t\t\t$current_uploader = $(this).closest('.mcg-media-uploader');\n\n\t\t\t// Reset preview\n\t\t\tswitch ($current_uploader.data('type')) {\n\t\t\t\tcase 'image':\n\n\t\t\t\t\tvar $image_preview = $(this).siblings('.image-preview');\n\t\t\t\t\t$image_preview.attr('src', $image_preview.data('placeholder') || '');\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tvar $media_url = $(this).siblings('.media-url');\n\t\t\t\t\t$media_url.html($media_url.data('placeholder') || '&nbsp;');\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t$current_uploader = false;\n\t\t});\n\t};\n\n\tfunction repeater_reset_uploader(e, $field) {\n\n\t\tvar $media_fields = $field.find('.mcg-field-media');\n\n\t\tif (!$media_fields.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t$media_fields.find('.remove-media').click();\n\t}\n\n\t$(mcg_instantiate_media_uploaders);\n})(jQuery);","/**\n Allows media uploader to be used in the backend.\n\n @since 1.0.0\n */\n( function( $ ) {\n\t'use strict';\n\n\twindow['mcg_instantiate_media_uploaders'] = function() {\n\n\t\tvar media_frame, $current_uploader;\n\n\t\tif ( ! wp.media ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmedia_frame = wp.media.frames.meta_image_frame = wp.media( {\n\t\t\ttitle: 'Choose Media'\n\t\t} );\n\n\t\tmedia_frame.on( 'select', function () {\n\n\t\t\tvar media_attachment = media_frame.state().get( 'selection' ).first().toJSON();\n\n\t\t\t$current_uploader.find( '.media-id' ).val(media_attachment.id);\n\n\t\t\t$current_uploader.find( '.upload-media' ).hide();\n\t\t\t$current_uploader.find( '.remove-media' ).show();\n\n\t\t\t// Preview\n\t\t\tswitch ( $current_uploader.data( 'type' ) ) {\n\t\t\t\tcase 'image' :\n\t\t\t\t\t$current_uploader.find( '.image-preview' ).attr( 'src', media_attachment.url );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault :\n\t\t\t\t\t$current_uploader.find( '.media-url' ).html( media_attachment.url );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t} );\n\n\t\t$( document ).on( 'click', '.mcg-media-uploader .upload-media', function( e ) {\n\n\t\t\te.preventDefault();\n\n\t\t\t$current_uploader = $( this ).closest( '.mcg-media-uploader' );\n\n\t\t\tvar type = $current_uploader.data( 'type' );\n\n\t\t\tmedia_frame.open();\n\n\t\t\t// TODO Not currently working\n\t\t\t//media_frame.title = $current_uploader.data( 'title' );\n\t\t\t//media_frame.button = {text: $current_uploader.data( 'button-text' )};\n\t\t\t//\n\t\t\t//if (type && type !== 'any' ) {\n\t\t\t//    media_frame.library = {type: type};\n\t\t\t//}\n\t\t} );\n\n\t\t$( document ).on( 'click', '.mcg-media-uploader .remove-media', function( e ) {\n\n\t\t\t$( this ).siblings( '.upload-media' ).show();\n\t\t\t$( this ).hide();\n\t\t\t$( this ).siblings( '.media-id' ).val( '' );\n\n\t\t\t$current_uploader = $( this ).closest( '.mcg-media-uploader' );\n\n\t\t\t// Reset preview\n\t\t\tswitch ( $current_uploader.data( 'type' ) ) {\n\t\t\t\tcase 'image':\n\n\t\t\t\t\tvar $image_preview = $( this ).siblings( '.image-preview' );\n\t\t\t\t\t$image_preview.attr( 'src', $image_preview.data( 'placeholder' ) || '' );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tvar $media_url = $( this ).siblings( '.media-url' );\n\t\t\t\t\t$media_url.html($media_url.data( 'placeholder' ) || '&nbsp;' );\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t}\n\n\t\t\t$current_uploader = false;\n\t\t} );\n\t};\n\n\tfunction repeater_reset_uploader( e, $field ) {\n\n\t\tvar $media_fields = $field.find( '.mcg-field-media' );\n\n\t\tif ( ! $media_fields.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$media_fields.find( '.remove-media' ).click();\n\t}\n\n\t$( mcg_instantiate_media_uploaders );\n\n} )( jQuery );"]}